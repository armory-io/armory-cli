name: 'armory/deployment'
description: 'Deploy your app with Armory Cloud'
inputs:
  path-to-file:
    description: 'Path to YAML file to deploy'
    required: true
  clientId:
    description: 'ClientId for Armory Cloud'
    required: true
  clientSecret:
    description: 'ClientSecret for Armory Cloud'
    required: true
  audience:
    description: 'audience'
  tokenIssuerUrl:
    description: 'tokenIssuerUrl'
  deployHostUrl:
    description: 'deployHostUrl'
outputs:
  deployment-link:
    description: 'Deployment status'
runs:
  using: 'docker'
  image: 'docker://armory/armory-cli:test'
  env:
    ARMORY_CLIENTID: ${{ inputs.clientId }}
    ARMORY_CLIENTSECRET: ${{ inputs.clientSecret }}
    ARMORY_AUDIENCE: ${{ inputs.audience }}
    ARMORY_TOKENISSUERURL: ${{ inputs.tokenIssuerUrl }}
    ARMORY_DEPLOYHOSTURL: ${{ inputs.deployHostUrl }}
  args:
    - "--file ${{ inputs.path-to-file }}"